package Pharmacy_management;

import java.awt.Color;
import java.awt.Container;
import java.awt.Font;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;

import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPasswordField;
import javax.swing.JTextField;





public class loginpage extends JFrame implements ActionListener {
	 JLabel l1,l2,bg,l3,l4;
	 JTextField t1;
	 JPasswordField t2;
	 JButton btn1,btn2;
	 JComboBox cb1;
	 String value="";
	
	loginpage()
	{

		
	    final int WIDTH =270;
	    final int HEIGHT=220;
	    setBounds(250, 150, 1100, 600);
	    setLayout(null);	
		l1=new JLabel("panakj");
		add(l1);
		String n[]= {"--SELECT--","Admin","Other"};
	     
		   
	    l1=new JLabel("-: WELCOME :-");
	    l2=new JLabel("USERNAME :");
	    l3=new JLabel("PASSWORD :");
	    l4=new JLabel("USER TYPE");
	    t1=new JTextField(15);
	    t2=new JPasswordField(15);
	    cb1=new JComboBox(n);
	    


//	   
	    btn1=new JButton("Login");
	    btn2=new JButton("Create Account");
	    
	    add(l1);
	    add(l2);
	    add(l3);
	    add(l4);
	    add(t1);
	    add(t2);
	    add(btn1);
	    add(btn2);
	    add(cb1);
	 
	 
	    
	    l1.setBounds(450, 25, 990,200);

	   
	    l2.setBounds(480, 195, 960, 60);
	    t1.setBounds(570, 215, 150, 25);
	    l3.setBounds(480, 250, 960, 60);
	    l4.setBounds(500, 400, 100, 28);
	    t2.setBounds(570, 265, 150, 25);
	  
	    btn1.setBounds(500, 330, 100,28);
	    btn2.setBounds(610, 330, 150, 28);
	   // bg.setBounds(0, 0, 1100, 600);
	    cb1.setBounds(580, 400, 100, 28);
	    
	  
	
	    
	    btn1.addActionListener(this);  
	    btn2.addActionListener(this);
	}


	@Override
	public void actionPerformed(ActionEvent e) {
		
		if(e.getSource()==btn1)
		{
			 value=cb1.getSelectedItem().toString();
			 if(value=="Other")
			 {
				 try
					{
						String username=t1.getText();
						String password=t2.getText();
						 
						Class.forName("com.mysql.cj.jdbc.Driver");
						Connection con=DriverManager.getConnection("jdbc:mysql://localhost:3306/pankaj","root","root");
//						Statement st=con.createStatement();
						PreparedStatement pst=con.prepareStatement("select * from medi1 where username=? and password=?");
						pst.setString(1, username);
						pst.setString(2, password);
						
						ResultSet rs=pst.executeQuery();
						
						if(rs.next())
						{

							 user h=new user();
							 h.setVisible(true);
							 h.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
							 h.setSize(1100, 600);
							 h.setResizable(false);
							 h.setBounds(250, 150, 1100, 600);
							
				
						}
						
					     else
						{
							JOptionPane.showMessageDialog(btn1, "incorrect username and password","Error",JOptionPane.ERROR_MESSAGE);
						}
						
						
					}
					catch(Exception e1)
					{
				        e1.printStackTrace();
					}
					


				}

			 }
		 if(value=="Admin")
		{
			String s3=t1.getText();					
			String s4=t2.getText();
			if(s3.equals("admin")&&s4.equals("admin"))
			{

				 adminpage h1=new adminpage();
				 h1.setVisible(true);
				 h1.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
				 h1.setSize(1100, 600);
				 h1.setLayout(null);
				 h1.setTitle("ADMIN");
				 h1.setResizable(false);
				 h1.setBounds(250, 150, 1100, 600);
				 this.dispose();
			}
			

		    else
			{
				JOptionPane.showMessageDialog(btn1, "incorrect username and password","Error",JOptionPane.ERROR_MESSAGE);
			}
		}
		
		else if(e.getSource()==btn2)
		{
			newaccount na=new newaccount();
			na.setVisible(true);
			na.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		    na.setLayout(null);
		    na.setResizable(false);

			
		     }
		
	}
		
		public static void main(String[] args) {
		loginpage l=new loginpage();
		l.setVisible(true);
		l.setDefaultCloseOperation(EXIT_ON_CLOSE);
		
	}
	

}
